!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.FormFileUpload=e()}}(function(){return function e(n,t,r){function i(o,l){if(!t[o]){if(!n[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var c=t[o]={exports:{}};n[o][0].call(c.exports,function(e){var t=n[o][1][e];return i(t?t:e)},c,c.exports,e,n,t,r)}return t[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)i(r[o]);return i}({1:[function(e,n){var t=e("./helper.js"),r=function(e,n){var r,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",a=0,o=0,l=0,s=this,c=t.extractDOMNodes(e),u=document.querySelector(".js_dropbox"),d=document.querySelector(".js_list"),m=document.querySelector(".js_fileinputs"),f=document.querySelector(".js_form"),p=document.createElement("div"),g=document.createElement("div"),v={errorMessageTimeout:5e3,maxFileSize:3145728,maxFileNumber:3,circleThumbnail:!1,maxRequestSize:9437184,invalidFileNameError:"Der Dateiname enthält ungültige Zeichen.",invalidFileTypeError:"Ein Dateiformat ist nicht zugelassen. Bitte wählen sie ein anderes Dateiformat.",maxRequestSizeError:"Das Datenlimit für den Upload von Dateien ist überschritten.",maxFileNumberError:"Sie können nur maximal 3 Dateien anhängen.",maxFileSizeError:"Eine Datei ist zu groß. Maximal 3 MB pro Datei sind zugelassen.",acceptedTypes:{"image/png":"PNG-Bild","image/jpeg":"JPEG-Bild","image/gif":"GIF-Bild","image/tiff":"TIFF-Bild","application/pdf":"PDF-Dokument","application/vnd.ms-excel":"Excel-Dokument","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel-Dokument","application/msword":"Word-Dokument","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word-Dokument"}},A=t.mergeOptions(n,v,s),h=function(e){o+=1,l+=e.size},E=function(e){o-=1,l-=e.size},F=function(e){return A.acceptedTypes[t.getFileType(e)]||"Unbekannt"};this.validateFile=function(e){var n=!1;return o>=A.maxFileNumber&&(n=!0,s.showErrorMessage(A.maxFileNumberError)),l>=A.maxRequestSize&&(n=!0,s.showErrorMessage(A.maxRequestSizeError)),A.acceptedTypes[t.getFileType(e)]||(n=!0,s.showErrorMessage(A.invalidFileTypeError)),e.size>A.maxFileSize&&(n=!0,s.showErrorMessage(A.maxFileSizeError)),/^[A-Za-z0-9.\-_ ]+$/.test(e.name)||(n=!0,s.showErrorMessage(invalidFileNameError)),n},this.showErrorMessage=function(e){clearTimeout(r),r=setTimeout(function(){s.removeErrors()},A.errorMessageTimeout);var n=document.createElement("li");n.className="error",n.innerHTML=e,p.appendChild(n),f.insertBefore(p,d)},this.removeErrors=function(){document.querySelectorAll(".error");p.innerHTML=""};var y=function(e,n){var r=new FileReader,a=document.createElement("span"),o=n.querySelector(".js_name");a.className="thumbnail",A.circleThumbnail&&(a.className+=" circle"),r.onload=function(r){var l=new Image;l.src=t.isImage(e)?r.target.result:i,a.appendChild(l),n.insertBefore(a,o)},r.readAsDataURL(e)},x=function(e,n){var r=t.getReadableFileSize(e.file),i=F(e.file),a=document.createElement("li");console.log("Hello: addFileToView"),a.className="file",a.innerHTML=['<span class="label js_name name">',e.file.name,'</span><span class="label size">',r,'</span><span class="label type">',i,"</span>"].join(""),t.hasFileReader&&y(e.file,a);var o=document.createElement("span");o.className="remove",a.appendChild(o),d.appendChild(a),o.addEventListener("click",function(){n(),a.remove(),E(e.file)})},w=function(e){var n=document.createElement("input");n.type="hidden",n.value=e.data,n.name="file: "+e.file.name,c.appendChild(n),x(e,function(){n.remove()})},D=function(e,n){e&&console.log(e),n&&w(n)},b=function(e,n){e.every(function(e){var t=new FileReader;return s.validateFile(e)?!1:(t.onload=function(t){n(null,{data:t.target.result,file:e}),h(e)},t.onerror=function(){n("Error while loading the file")},t.readAsDataURL(e),!0)})},T=function(){var e=document.createElement("input");e.type="file",e.className="fileinput",a+=1,e.name="fileInput "+a,f.insertBefore(g,u),g.appendChild(e),e.addEventListener("change",function(){s.removeErrors();var n=e.files[0],t={file:n};s.validateFile(n)?e.parentNode.removeChild(e):(h(n),m.appendChild(e),x(t,function(){E(n),e.parentNode.removeChild(e)})),T()})};if(this.addDroppedFiles=function(e){var n=t.toArray(e.dataTransfer.files);b(n,D)},u.addEventListener("drop",function(e){t.noPropagation(e),s.addDroppedFiles(e),this.classList.toggle("active")}),u.addEventListener("dragenter",function(e){t.noPropagation(e),this.classList.toggle("active")}),u.addEventListener("dragover",function(e){t.noPropagation(e)}),u.addEventListener("dragleave",function(e){t.noPropagation(e),this.classList.toggle("active")}),!t.hasFileReader()){g.className="selectbutton js_selectbutton";var M=document.createElement("span");M.innerHTML="Select File",g.appendChild(M),T(),u.style.display="none"}};n.exports=r},{"./helper.js":2}],2:[function(e,n,t){var r=function(e){return"function"==typeof e?e[0]:e},i=function(e){return Array.prototype.slice.call(e,0)},a=function(){return!!(window.File&&window.FileList&&window.FileReader)},o=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():(e.returnValue=!1,!1)},l=function(e,n,t){var r={};for(var i in n)e&&e.hasOwnProperty(i)?(r[i]=e[i],"function"==typeof r[i]&&(r[i]=r[i].bind(t))):r[i]=n[i];return r},s=function(e){return/\.xls$/.test(e.name)&&!e.type?"application/vnd.ms-excel":e.type},c=function(e){var n,t=e.size;return t>=1099511627776?(t/=109951162777.6,n="TB"):t>=1073741824?(t/=107374182.4,n="GB"):t>=1048576?(t/=104857.6,n="MB"):t>=1024?(t/=102.4,n="KB"):(t=10*t,n="B"),Math.round(t)/10+" "+n},u=function(e){return/^image\//.test(s(e))};t.extractDOMNodes=r,t.toArray=i,t.hasFileReader=a,t.noPropagation=o,t.mergeOptions=l,t.getFileType=s,t.getReadableFileSize=c,t.isImage=u},{}]},{},[1])(1)});