!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.FormFileUpload=e()}}(function(){return function e(t,i,n){function r(o,l){if(!i[o]){if(!t[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return r(i?i:e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t){var i=e("./utils/merge-options.js"),n=e("./utils/get-file-type.js"),r=e("./utils/get-readable-file-size.js"),a=e("./utils/has-filereader.js"),o=e("./utils/create-file-input.js"),l=e("./utils/no-propagation.js"),s=e("./utils/to-array.js"),u=function(t,u){"use strict";var c,d=0,f={fileNumber:0,requestSize:0},m=this,p=document.querySelector(".js_dropbox"),v=document.querySelector(".js_list"),h=document.querySelector(".js_fileinputs"),g=document.querySelector(".js_form"),A=document.createElement("div"),E=document.createElement("div"),x={errorMessageTimeout:5e3,maxFileSize:3145728,maxFileNumber:3,thumbnailSize:100,maxRequestSize:9437184,fallbackForIE8:!0,fileNameRe:/^[A-Za-z0-9.\-_ ]+$/,invalidFileNameError:"The name of the file has forbidden characters",invalidFileTypeError:"The fileformat is not allowed",maxRequestSizeError:"The requestsize of the files you want to upload is exceeded.",maxFileNumberError:"You can upload 3 files, not more!",maxFileSizeError:"One of the files is too large. the maximum filesize is 3 MB.",unknownFileReaderError:"Unknown Error while loading the file.",acceptedTypes:{"image/png":"PNG-Bild","image/jpeg":"JPEG-Bild","image/gif":"GIF-Bild","image/tiff":"TIFF-Bild","application/pdf":"PDF-Dokument","application/vnd.ms-excel":"Excel-Dokument","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel-Dokument","application/msword":"Word-Dokument","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word-Dokument"}},y=i(u,x,m),F=function(e,t){t.fileNumber+=1,t.requestSize+=e.size},b=function(e,t){t.fileNumber-=1,t.requestSize-=e.size},w=function(e,t){var i=document.createElement("input");return i.type="hidden",i.value=e.data,i.name="file:"+e.file.name,t.appendChild(i),function(){i.parentNode.removeChild(i)}},j=function(e,t,i,n,r){var a=document.createElement("span");a.className="remove",r.appendChild(a),n.appendChild(r),a.addEventListener("click",function(){t(i),r.parentNode.removeChild(r),b(e.file,i)})},S=function(t,i,n){var r=e("./utils/is-image.js"),a="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",o=new FileReader,l=window.devicePixelRatio,s=document.createElement("span"),u=document.createElement("canvas");u.width=n.thumbnailSize*l,u.height=n.thumbnailSize*l;var c=u.getContext("2d");l>1&&(c.webkitBackingStorePixelRatio=l,c.scale(l,l));var d=i.querySelector(".js_name"),f=new Image;s.className="thumbnail",f.addEventListener("load",function(){var e=this.height/this.width;u.height=u.width*e,c.drawImage(this,0,0,n.thumbnailSize*l,n.thumbnailSize*e*l)}),o.addEventListener("load",function(e){f.src=r(t)?e.target.result:a,s.appendChild(u),i.insertBefore(s,d)}),o.readAsDataURL(t)},z=function(e,t,i){var n=document.createElement("li");return n.className="file",n.innerHTML=['<span class="label js_name name">',e,'</span><span class="label size">',t,'</span><span class="label type">',i,"</span>"].join(""),n},N=function(e,t){return t.acceptedTypes[e]||"unknown filetype"},T=function(e,t){return e.fileNumber>=t.maxFileNumber?!1:!0},L=function(e,t){return e>=t.maxRequestSize?!1:!0},B=function(e,t){return t.acceptedTypes[e]?!0:!1},R=function(e,t){return e.size>t.maxFileSize?!1:!0},q=function(e,t){return t.fileNameRe.test(e.name)?!0:!1},C=function(e,t,i,n,r,a,o){var l=document.createElement("li");l.className="error",l.innerHTML=e,clearTimeout(t),t=setTimeout(function(){i(n)},o.errorMessageTimeout),n.appendChild(l),r.insertBefore(n,a)},k=function(e){e.innerHTML=""},M=function(e,t){if(e&&console.log(e),t){var i=w(t,g),o=N(n(t.file),y),l=z(t.file.name,r(t.file),o);j(t,i,f,v,l),a()&&S(t.file,l,y)}},I=function(e){return T(f,y)?L(f,y)?B(n(e),y)?R(e,y)?q(e,y)?!0:y.invalidFileNameError:y.maxFileSizeError:y.invalidFileTypeError:y.maxRequestSizeError:y.maxFileNumberError};if(this.convertFilesToBase64=function(e){e.every(function(e){var t=new FileReader;return"string"==typeof I(e)?(C(I(e),c,k,A,g,v,y),!1):(F(e,f),t.addEventListener("load",function(t){M(null,{data:t.target.result,file:e})}),t.addEventListener("error",function(){M(y.unknownFileReaderError)}),t.readAsDataURL(e),!0)})},this.addSelectedFile=function(){var e=o(d);g.insertBefore(E,p),E.appendChild(e),e.addEventListener("change",function(){k(A);var t=this.files[0],i={file:t},o=function(){b(t,f),e.parentNode.removeChild(e)};if("string"==typeof I(t))C(I(t),y.errorTimeoutId,k,A,g,v,y),e.parentNode.removeChild(e);else{var l=N(n(t),y),s=z(t.name,l,r(i.file));F(t,f),j(i,o,f,v,s),a()&&S(t,s,y),h.appendChild(e)}m.addSelectedFile()})},p.addEventListener("drop",function(e){l(e);var t=s(e.dataTransfer.files);m.convertFilesToBase64(t),this.classList.toggle("active")}),p.addEventListener("dragenter",function(e){l(e),this.classList.toggle("active")}),p.addEventListener("dragover",function(e){l(e)}),p.addEventListener("dragleave",function(e){l(e),this.classList.toggle("active")}),!a()&&y.fallbackForIE8){E.className="selectbutton js_selectbutton";var D=document.createElement("span");D.innerHTML="Select File",E.appendChild(D),m.addSelectedFile(),p.style.display="none"}};t.exports=u},{"./utils/create-file-input.js":2,"./utils/get-file-type.js":3,"./utils/get-readable-file-size.js":4,"./utils/has-filereader.js":5,"./utils/is-image.js":6,"./utils/merge-options.js":7,"./utils/no-propagation.js":8,"./utils/to-array.js":9}],2:[function(e,t){var i=function(e){"use strict";var t=document.createElement("input");return t.type="file",t.className="fileinput",e+=1,t.name="fileInput "+e,t};t.exports=i},{}],3:[function(e,t){var i=function(e){"use strict";return/\.xls$/.test(e.name)&&!e.type?"application/vnd.ms-excel":e.type};t.exports=i},{}],4:[function(e,t){var i=function(e){"use strict";var t,i=e.size;return i>=1099511627776?(i/=109951162777.6,t="TB"):i>=1073741824?(i/=107374182.4,t="GB"):i>=1048576?(i/=104857.6,t="MB"):i>=1024?(i/=102.4,t="KB"):(i=10*i,t="B"),Math.round(i)/10+" "+t};t.exports=i},{}],5:[function(e,t){var i=function(){"use strict";return!!(window.File&&window.FileList&&window.FileReader)};t.exports=i},{}],6:[function(e,t){var i=e("./get-file-type.js"),n=function(e){"use strict";return/^image\//.test(i(e))};t.exports=n},{"./get-file-type.js":3}],7:[function(e,t){var i=function(e,t,i){"use strict";var n={};for(var r in t)e&&e.hasOwnProperty(r)?(n[r]=e[r],"function"==typeof n[r]&&(n[r]=n[r].bind(i))):n[r]=t[r];return n};t.exports=i},{}],8:[function(e,t){var i=function(e){"use strict";return e.stopPropagation(),e.preventDefault?e.preventDefault():(e.returnValue=!1,!1)};t.exports=i},{}],9:[function(e,t){var i=function(e){"use strict";return Array.prototype.slice.call(e,0)};t.exports=i},{}]},{},[1])(1)});