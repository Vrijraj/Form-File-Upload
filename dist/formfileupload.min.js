!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var t;"undefined"!=typeof window?t=window:"undefined"!=typeof global?t=global:"undefined"!=typeof self&&(t=self),t.FormFileUpload=e()}}(function(){return function e(t,i,n){function r(o,l){if(!i[o]){if(!t[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){var i=t[o][1][e];return r(i?i:e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<n.length;o++)r(n[o]);return r}({1:[function(e,t){"use strict";var i=e("./utils/merge-options.js"),n=e("./utils/get-file-type.js"),r=e("./utils/get-readable-file-size.js"),a=e("./utils/has-filereader.js"),o=e("./utils/create-file-input.js"),l=e("./utils/no-propagation.js"),s=e("./utils/to-array.js"),u=e("./utils/is-image.js"),c="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",d=function(e,t){var d,f=0,m={fileNumber:0,requestSize:0},p=this,v=document.querySelector(".js_dropbox"),h=document.querySelector(".js_list"),g=document.querySelector(".js_fileinputs"),A=document.querySelector(".js_form"),E=document.createElement("div"),x=document.createElement("div"),y={errorMessageTimeout:5e3,maxFileSize:3145728,maxFileNumber:3,thumbnailSize:100,maxRequestSize:9437184,fallbackForIE8:!0,fileNameRe:/^[A-Za-z0-9.\-_ ]+$/,invalidFileNameError:"The name of the file has forbidden characters",invalidFileTypeError:"The fileformat is not allowed",maxRequestSizeError:"The requestsize of the files you want to upload is exceeded.",maxFileNumberError:"You can upload 3 files, not more!",maxFileSizeError:"One of the files is too large. the maximum filesize is 3 MB.",unknownFileReaderError:"Unknown Error while loading the file.",acceptedTypes:{"image/png":"PNG-Bild","image/jpeg":"JPEG-Bild","image/gif":"GIF-Bild","image/tiff":"TIFF-Bild","application/pdf":"PDF-Dokument","application/vnd.ms-excel":"Excel-Dokument","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel-Dokument","application/msword":"Word-Dokument","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word-Dokument"}},F=i(t,y,p),b=function(e){m.fileNumber+=1,m.requestSize+=e.size},w=function(e){m.fileNumber-=1,m.requestSize-=e.size},j=function(e){var t=document.createElement("input");return t.type="hidden",t.value=e.data,t.name="file:"+e.file.name,A.appendChild(t),function(){t.parentNode.removeChild(t)}},S=function(e,t,i){var n=document.createElement("span");n.className="remove",i.appendChild(n),h.appendChild(i),n.addEventListener("click",function(){t(m),i.parentNode.removeChild(i),w(e.file)})},z=function(e,t,i){var n=document.createElement("canvas"),r=window.devicePixelRatio,a=document.createElement("span");a.className="thumbnail";var o=new FileReader,l=n.getContext("2d");n.width=i.thumbnailSize*r,n.height=i.thumbnailSize*r,r>1&&(l.webkitBackingStorePixelRatio=r,l.scale(r,r));var s=new Image;s.addEventListener("load",function(){var e=this.height/this.width;n.height=n.width*e,l.drawImage(this,0,0,i.thumbnailSize*r,i.thumbnailSize*e*r)});var d=t.querySelector(".js_name");o.addEventListener("load",function(i){s.src=u(e)?i.target.result:c,a.appendChild(n),t.insertBefore(a,d)}),o.readAsDataURL(e)},N=function(e,t,i){var n=document.createElement("li");return n.className="file",n.innerHTML=['<span class="label js_name name">',e,'</span><span class="label size">',t,'</span><span class="label type">',i,"</span>"].join(""),n},T=function(e,t){return t.acceptedTypes[e]||"unknown filetype"},L=function(e,t){return e.fileNumber>=t.maxFileNumber?!1:!0},B=function(e,t){return e>=t.maxRequestSize?!1:!0},R=function(e,t){return t.acceptedTypes[e]?!0:!1},q=function(e,t){return e.size>t.maxFileSize?!1:!0},C=function(e,t){return t.fileNameRe.test(e.name)?!0:!1},k=function(e){e.innerHTML=""},M=function(e){var t=document.createElement("li");t.className="error",t.innerHTML=e,clearTimeout(d),d=setTimeout(function(){k(E)},F.errorMessageTimeout),E.appendChild(t),A.insertBefore(E,h)},I=function(e,t){if(e&&console.log(e),t){var i=j(t),o=T(n(t.file),F),l=N(t.file.name,r(t.file),o);S(t,i,m,h,l),a()&&z(t.file,l,F)}},D=function(e){return L(m,F)?B(m,F)?R(n(e),F)?q(e,F)?C(e,F)?!0:F.invalidFileNameError:F.maxFileSizeError:F.invalidFileTypeError:F.maxRequestSizeError:F.maxFileNumberError};if(this.convertFilesToBase64=function(e){e.every(function(e){var t=new FileReader;return"string"==typeof D(e)?(M(D(e)),!1):(b(e),t.addEventListener("load",function(t){I(null,{data:t.target.result,file:e})}),t.addEventListener("error",function(){I(F.unknownFileReaderError)}),t.readAsDataURL(e),!0)})},this.addSelectedFile=function(){var e=o(f);A.insertBefore(x,v),x.appendChild(e),e.addEventListener("change",function(){k(E);var t=this.files[0],i={file:t},o=function(){w(t,m),e.parentNode.removeChild(e)};if("string"==typeof D(t))M(D(t),F.errorTimeoutId,k,E,A,h,F),e.parentNode.removeChild(e);else{var l=T(n(t),F),s=N(t.name,l,r(i.file));b(t,m),S(i,o,s),a()&&z(t,s,F),g.appendChild(e)}p.addSelectedFile()})},!a()&&F.fallbackForIE8){x.className="selectbutton js_selectbutton";var U=document.createElement("span");U.innerHTML="Select File",x.appendChild(U),p.addSelectedFile(),v.style.display="none"}v.addEventListener("drop",function(e){l(e);var t=s(e.dataTransfer.files);p.convertFilesToBase64(t),this.classList.toggle("active")}),v.addEventListener("dragenter",function(e){l(e),this.classList.toggle("active")}),v.addEventListener("dragover",function(e){l(e)}),v.addEventListener("dragleave",function(e){l(e),this.classList.toggle("active")})};t.exports=d},{"./utils/create-file-input.js":2,"./utils/get-file-type.js":3,"./utils/get-readable-file-size.js":4,"./utils/has-filereader.js":5,"./utils/is-image.js":6,"./utils/merge-options.js":7,"./utils/no-propagation.js":8,"./utils/to-array.js":9}],2:[function(e,t){"use strict";var i=function(e){var t=document.createElement("input");return t.type="file",t.className="fileinput",t.name="fileInput "+e,e+=1,t};t.exports=i},{}],3:[function(e,t){"use strict";var i=function(e){return/\.xls$/.test(e.name)&&!e.type?"application/vnd.ms-excel":e.type};t.exports=i},{}],4:[function(e,t){"use strict";var i=function(e){var t,i=e.size;return i>=1099511627776?(i/=109951162777.6,t="TB"):i>=1073741824?(i/=107374182.4,t="GB"):i>=1048576?(i/=104857.6,t="MB"):i>=1024?(i/=102.4,t="KB"):(i=10*i,t="B"),Math.round(i)/10+" "+t};t.exports=i},{}],5:[function(e,t){"use strict";var i=function(){return!!(window.File&&window.FileList&&window.FileReader)};t.exports=i},{}],6:[function(e,t){"use strict";var i=e("./get-file-type.js"),n=function(e){return/^image\//.test(i(e))};t.exports=n},{"./get-file-type.js":3}],7:[function(e,t){"use strict";var i=function(e,t,i){var n={};for(var r in t)e&&e.hasOwnProperty(r)?(n[r]=e[r],"function"==typeof n[r]&&(n[r]=n[r].bind(i))):n[r]=t[r];return n};t.exports=i},{}],8:[function(e,t){"use strict";var i=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():(e.returnValue=!1,!1)};t.exports=i},{}],9:[function(e,t){"use strict";var i=function(e){return Array.prototype.slice.call(e,0)};t.exports=i},{}]},{},[1])(1)});