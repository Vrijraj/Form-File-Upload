!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.FormFileUpload=e()}}(function(){return function e(n,r,t){function i(o,l){if(!r[o]){if(!n[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var d=r[o]={exports:{}};n[o][0].call(d.exports,function(e){var r=n[o][1][e];return i(r?r:e)},d,d.exports,e,n,r,t)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<t.length;o++)i(t[o]);return i}({1:[function(e,n){var r=e("./helper.js"),t=function(e,n){var t,i="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",a=0,o=0,l=0,s=this,d=(r.extractDOMNodes(e),document.querySelector(".js_dropbox")),c=document.querySelector(".js_list"),u=document.querySelector(".js_fileinputs"),f=document.querySelector(".js_form"),m=document.createElement("div"),p=document.createElement("div"),v={errorMessageTimeout:5e3,maxFileSize:3145728,maxFileNumber:3,circleThumbnail:!1,maxRequestSize:9437184,fallbackForIE8:!0,invalidFileNameError:"The name of the file has forbidden characters",invalidFileTypeError:"The fileformat is not allowed",maxRequestSizeError:"The requestsize of the files you want to upload is exceeded.",maxFileNumberError:"You can upload 3 files, not more!",maxFileSizeError:"One of the files is too large. the maximum filesize is 3 MB.",unknownFileReaderError:"Unknown Error while loading the file.",acceptedTypes:{"image/png":"PNG-Bild","image/jpeg":"JPEG-Bild","image/gif":"GIF-Bild","image/tiff":"TIFF-Bild","application/pdf":"PDF-Dokument","application/vnd.ms-excel":"Excel-Dokument","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel-Dokument","application/msword":"Word-Dokument","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word-Dokument"}},h=r.mergeOptions(n,v,s),g=function(e){o+=1,l+=e.size},A=function(e){o-=1,l-=e.size},E=function(e){return h.acceptedTypes[r.getFileType(e)]||"Unbekannt"};this.validateFile=function(e){var n=!1;return o>=h.maxFileNumber&&(n=!0,s.showErrorMessage(h.maxFileNumberError)),l>=h.maxRequestSize&&(n=!0,s.showErrorMessage(h.maxRequestSizeError)),h.acceptedTypes[r.getFileType(e)]||(n=!0,s.showErrorMessage(h.invalidFileTypeError)),e.size>h.maxFileSize&&(n=!0,s.showErrorMessage(h.maxFileSizeError)),/^[A-Za-z0-9.\-_ ]+$/.test(e.name)||(n=!0,s.showErrorMessage(invalidFileNameError)),n},this.showErrorMessage=function(e){clearTimeout(t),t=setTimeout(function(){s.removeErrors()},h.errorMessageTimeout);var n=document.createElement("li");n.className="error",n.innerHTML=e,m.appendChild(n),f.insertBefore(m,c)},this.removeErrors=function(){document.querySelectorAll(".error");m.innerHTML=""};var F=function(e,n){var t=new FileReader,a=document.createElement("span"),o=n.querySelector(".js_name");a.className="thumbnail",h.circleThumbnail&&(a.className+=" circle"),t.addEventListener("load",function(t){var l=new Image;l.src=r.isImage(e)?t.target.result:i,a.appendChild(l),n.insertBefore(a,o)}),t.readAsDataURL(e)},y=function(e){var n=r.getReadableFileSize(e.file),t=E(e.file),i=document.createElement("li");return i.className="file",i.innerHTML=['<span class="label js_name name">',e.file.name,'</span><span class="label size">',n,'</span><span class="label type">',t,"</span>"].join(""),i},w=function(e,n){var t=y(e);r.hasFileReader&&F(e.file,t);var i=document.createElement("span");i.className="remove",t.appendChild(i),c.appendChild(t),i.addEventListener("click",function(){n(),t.parentNode.removeChild(t),A(e.file)})},x=function(e){var n=document.createElement("input");n.type="hidden",n.value=e.data,n.name="file:"+e.file.name,f.appendChild(n),w(e,function(){n.parentNode.removeChild(n)})},T=function(e,n){e&&console.log(e),n&&x(n)};this.convertFilesToBase64=function(e){e.every(function(e){var n=new FileReader;return s.validateFile(e)?!1:(n.addEventListener("load",function(n){T(null,{data:n.target.result,file:e}),g(e)}),n.addEventListener("error",function(){T(h.unknownFileReaderError)}),n.readAsDataURL(e),!0)})};var b=function(){var e=document.createElement("input");return e.type="file",e.className="fileinput",a+=1,e.name="fileInput "+a,e};if(this.addSelectedFile=function(){var e=b();f.insertBefore(p,d),p.appendChild(e),e.addEventListener("change",function(){s.removeErrors();var n=this.files[0],r={file:n};s.validateFile(n)?e.parentNode.removeChild(e):(g(n),u.appendChild(e),w(r,function(){A(n),e.parentNode.removeChild(e)})),s.addSelectedFile()})},d.addEventListener("drop",function(e){r.noPropagation(e);var n=r.toArray(e.dataTransfer.files);s.convertFilesToBase64(n),this.classList.toggle("active")}),d.addEventListener("dragenter",function(e){r.noPropagation(e),this.classList.toggle("active")}),d.addEventListener("dragover",function(e){r.noPropagation(e)}),d.addEventListener("dragleave",function(e){r.noPropagation(e),this.classList.toggle("active")}),!r.hasFileReader()&&h.fallbackForIE8){p.className="selectbutton js_selectbutton";var S=document.createElement("span");S.innerHTML="Select File",p.appendChild(S),s.addSelectedFile(),d.style.display="none"}};n.exports=t},{"./helper.js":2}],2:[function(e,n,r){var t=function(e){return"function"==typeof e?e[0]:e},i=function(e){return Array.prototype.slice.call(e,0)},a=function(){return!!(window.File&&window.FileList&&window.FileReader)},o=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():(e.returnValue=!1,!1)},l=function(e,n,r){var t={};for(var i in n)e&&e.hasOwnProperty(i)?(t[i]=e[i],"function"==typeof t[i]&&(t[i]=t[i].bind(r))):t[i]=n[i];return t},s=function(e){return/\.xls$/.test(e.name)&&!e.type?"application/vnd.ms-excel":e.type},d=function(e){var n,r=e.size;return r>=1099511627776?(r/=109951162777.6,n="TB"):r>=1073741824?(r/=107374182.4,n="GB"):r>=1048576?(r/=104857.6,n="MB"):r>=1024?(r/=102.4,n="KB"):(r=10*r,n="B"),Math.round(r)/10+" "+n},c=function(e){return/^image\//.test(s(e))};r.extractDOMNodes=t,r.toArray=i,r.hasFileReader=a,r.noPropagation=o,r.mergeOptions=l,r.getFileType=s,r.getReadableFileSize=d,r.isImage=c},{}]},{},[1])(1)});