!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.EasyFormFileUpload=e()}}(function(){return function e(n,t,i){function r(o,l){if(!t[o]){if(!n[o]){var u="function"==typeof require&&require;if(!l&&u)return u(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var s=t[o]={exports:{}};n[o][0].call(s.exports,function(e){var t=n[o][1][e];return r(t?t:e)},s,s.exports,e,n,t,i)}return t[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)r(i[o]);return r}({1:[function(e,n){var t=e("./helper.js"),i=function(e,n,i,r){var a,o=5e3,l="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",u=this,e=t.extractDOMNodes(e),n=t.extractDOMNodes(n),i=t.extractDOMNodes(i),s=document.querySelector(".js_list"),c=(document.querySelector(".js_fileinputs"),document.querySelector(".js_form")),d=document.createElement("div"),f=0,m=0,p={errorMessageTimeout:5e3,maxFileSize:3145728,maxFileNumber:3,circleThumbnail:!1,maxRequestSize:9437184,invalidFileNameError:"Der Dateiname enthält ungültige Zeichen.",invalidFileTypeError:"Ein Dateiformat ist nicht zugelassen. Bitte wählen sie ein anderes Dateiformat.",maxRequestSizeError:"Das Datenlimit für den Upload von Dateien ist überschritten.",maxFileNumberError:"Sie können nur maximal 3 Dateien anhängen.",maxFileSizeError:"Eine Datei ist zu groß. Maximal 3 MB pro Datei sind zugelassen.",acceptedTypes:{"image/png":"PNG-Bild","image/jpeg":"JPEG-Bild","image/gif":"GIF-Bild","image/tiff":"TIFF-Bild","application/pdf":"PDF-Dokument","application/vnd.ms-excel":"Excel-Dokument","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel-Dokument","application/msword":"Word-Dokument","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word-Dokument"}},A=t.mergeOptions(r,p,u),g=function(e){var n=!1;return f>=A.maxFileNumber&&(n=!0,E(A.maxFileNumberError)),m>=A.maxRequestSize&&(n=!0,E(A.maxRequestSizeError)),A.acceptedTypes[t.getFileType(e)]||(n=!0,E(A.invalidFileTypeError)),e.size>A.maxFileSize&&(n=!0,E(A.maxFileSizeError)),/^[A-Za-z0-9.\-_ ]+$/.test(e.name)||(n=!0,E(invalidFileNameError)),!n},v=function(e){f+=1,m+=e.size},y=function(e){f-=1,m-=e.size},E=function(e){h(),clearTimeout(a),a=setTimeout(function(){h(),console.log("hallo")},o);var n=document.createElement("li");n.className="error",n.innerHTML=e,d.appendChild(n),c.insertBefore(d,s)},h=function(){document.querySelectorAll(".error");d.innerHTML=""},x=function(e){return A.acceptedTypes[t.getFileType(e)]||"Unbekannt"},F=function(e,n){var i=new FileReader,r=document.createElement("span"),a=n.querySelector(".js_name");r.className="thumbnail",A.circleThumbnail&&(r.className+=" circle"),i.onload=function(i){var o=new Image;o.src=t.isImage(e)?i.target.result:l,r.appendChild(o),n.insertBefore(r,a)},i.readAsDataURL(e)},D=function(e,n){var i=t.getReadableFileSize(e.file),r=x(e.file),a=document.createElement("li");a.className="file",a.innerHTML='<span class="label js_name name">'+e.file.name+'</span><span class="label size">'+i+'</span><span class="label type">'+r+"</span>",t.hasFileReader&&F(e.file,a),s.appendChild(a);var o=document.createElement("span");o.className="remove",o.addEventListener("click",function(){n(),a.remove(),y(e.file)})},b=function(n){var t=document.createElement("input");t.type="hidden",t.value=n.data,t.name="file: "+n.file.name,e.appendChild(t),D(n,function(){t.remove()})},w=function(e,n){e&&console.log(e),n&&b(n)},T=function(e,n){e.every(function(e){if(v(e),!g(e))return!1;var t=new FileReader;return t.onload=function(t){n(null,{data:t.target.result,file:e})},t.onerror=function(){n("Error while loading the file")},t.readAsDataURL(e),!0})},z=function(e){var n=t.toArray(e.dataTransfer.files);T(n,w)};i.addEventListener("drop",function(e){t.noPropagation(e),z(e)}),i.addEventListener("dragenter",function(e){t.noPropagation(e)}),i.addEventListener("dragover",function(e){t.noPropagation(e)}),i.addEventListener("dragleave",function(e){t.noPropagation(e)}),t.hasFileReader()||i.hide()};n.exports=i},{"./helper.js":2}],2:[function(e,n,t){var i=function(e){return"function"==typeof e?e[0]:e},r=function(e){return Array.prototype.slice.call(e,0)},a=function(){return!!(window.File&&window.FileList&&window.FileReader)},o=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},l=function(e,n,t){var i={};for(var r in n)e&&e.hasOwnProperty(r)?(i[r]=e[r],"function"==typeof i[r]&&(i[r]=i[r].bind(t))):i[r]=n[r];return i},u=function(e){return/\.xls$/.test(e.name)&&!e.type?"application/vnd.ms-excel":e.type},s=function(e){var n,t=e.size;return t>=1099511627776?(t/=109951162777.6,n="TB"):t>=1073741824?(t/=107374182.4,n="GB"):t>=1048576?(t/=104857.6,n="MB"):t>=1024?(t/=102.4,n="KB"):(t=10*t,n="B"),Math.round(t)/10+" "+n};isImage=function(e){return/^image\//.test(u(e))},t.extractDOMNodes=i,t.toArray=r,t.hasFileReader=a,t.noPropagation=o,t.mergeOptions=l,t.getFileType=u,t.getReadableFileSize=s,t.isImage=isImage},{}]},{},[1])(1)});