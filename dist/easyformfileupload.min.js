!function(e){if("object"==typeof exports)module.exports=e();else if("function"==typeof define&&define.amd)define(e);else{var n;"undefined"!=typeof window?n=window:"undefined"!=typeof global?n=global:"undefined"!=typeof self&&(n=self),n.EasyFormFileUpload=e()}}(function(){return function e(n,r,i){function t(o,l){if(!r[o]){if(!n[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=r[o]={exports:{}};n[o][0].call(u.exports,function(e){var r=n[o][1][e];return t(r?r:e)},u,u.exports,e,n,r,i)}return r[o].exports}for(var a="function"==typeof require&&require,o=0;o<i.length;o++)t(i[o]);return t}({1:[function(e,n){var r=e("./helper.js"),i=function(e,n,i,t){var a=this,e=r.extractDOMNodes(e),n=r.extractDOMNodes(n),i=r.extractDOMNodes(i),o=document.querySelector(".js_list"),l=(document.querySelector(".js_fileinputs"),0),s=0,u={emptyImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",errorMessageTimeout:5e3,maxFileSize:3145728,maxFileNumber:3,circleThumbnail:!1,maxRequestSize:9437184,invalidFileNameError:"Der Dateiname enthält ungültige Zeichen.",invalidFileTypeError:"Ein Dateiformat ist nicht zugelassen. Bitte wählen sie ein anderes Dateiformat.",maxRequestSizeError:"Das Datenlimit für den Upload von Dateien ist überschritten.",maxFileNumberError:"Sie können nur maximal 3 Dateien anhängen.",maxFileSizeError:"Eine Datei ist zu groß. Maximal 3 MB pro Datei sind zugelassen.",acceptedTypes:{"image/png":"PNG-Bild","image/jpeg":"JPEG-Bild","image/gif":"GIF-Bild","image/tiff":"TIFF-Bild","application/pdf":"PDF-Dokument","application/vnd.ms-excel":"Excel-Dokument","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel-Dokument","application/msword":"Word-Dokument","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word-Dokument"}},c=r.mergeOptions(t,u,a);validateFile=function(e){var n=!1;return l>=c.maxFileNumber&&(n=!0,showErrorMessage(c.maxFileNumberError)),s>=c.maxRequestSize&&(n=!0,showErrorMessage(c.maxRequestSizeError)),c.acceptedTypes[r.getFileType(e)]||(n=!0,showErrorMessage(c.invalidFileTypeError)),e.size>c.maxFileSize&&(n=!0,showErrorMessage(c.maxFileSizeError)),/^[A-Za-z0-9.\-_ ]+$/.test(e.name)||(n=!0,showErrorMessage(invalidFileNameError)),!n},trackFile=function(e){l+=1,s+=e.size},untrackFile=function(e){l-=1,s-=e.size},showErrorMessage=function(){clearTimeout(errorTimeoutId),errorTimeoutId=setTimeout(function(){removeErrors(!0)},ERROR_MESSAGE_TIMEOUT)},removeErrors=function(e){};var d=function(e){return c.acceptedTypes[r.getFileType(e)]||"Unbekannt"},f=function(e,n){var i=new FileReader,t=document.createElement("span"),a=n.querySelector(".js_name");t.className="thumbnail",c.circleThumbnail&&(t.className+=" circle"),i.onload=function(i){var o=new Image;o.src=r.isImage(e)?i.target.result:EMPTY_IMAGE,t.appendChild(o),n.insertBefore(t,a)},i.readAsDataURL(e)},m=function(e,n){var i=r.getReadableFileSize(e.file),t=d(e.file),a=document.createElement("li");a.className="file",a.innerHTML='<span class="label js_name name">'+e.file.name+'</span><span class="label size">'+i+'</span><span class="label type">'+t+"</span>",r.hasFileReader&&f(e.file,a),o.appendChild(a);var l=document.createElement("span");l.className="remove",l.addEventListener("click",function(){n(),a.remove(),untrackFile(e.file)})},p=function(n){var r=document.createElement("input");r.type="hidden",r.value=n.data,r.name="file: "+n.file.name,e.appendChild(r),m(n,function(){r.remove()})},g=function(e,n){e&&console.log(e),n&&validateFile(n.file)&&(trackFile(n.file),p(n))},A=function(e,n){e.forEach(function(e){var r=new FileReader;r.onload=function(r){n(null,{data:r.target.result,file:e})},r.onerror=function(){n("Error while loading the file")},r.readAsDataURL(e)})},v=function(e){var n=r.toArray(e.dataTransfer.files);A(n,g)};i.addEventListener("drop",function(e){r.noPropagation(e),$(this).removeClass("active"),v(e)}),i.addEventListener("dragenter",function(e){r.noPropagation(e)}),i.addEventListener("dragover",function(e){r.noPropagation(e),$(this).addClass("active")}),i.addEventListener("dragleave",function(e){r.noPropagation(e),$(this).removeClass("active")}),r.hasFileReader()||i.hide()};n.exports=i},{"./helper.js":2}],2:[function(e,n,r){var i=function(e){return"function"==typeof e?e[0]:e},t=function(e){return Array.prototype.slice.call(e,0)},a=function(){return!!(window.File&&window.FileList&&window.FileReader)},o=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},l=function(e,n,r){var i={};for(var t in n)e&&e.hasOwnProperty(t)?(i[t]=e[t],"function"==typeof i[t]&&(i[t]=i[t].bind(r))):i[t]=n[t];return i},s=function(e){return/\.xls$/.test(e.name)&&!e.type?"application/vnd.ms-excel":e.type},u=function(e){var n,r=e.size;return r>=1099511627776?(r/=109951162777.6,n="TB"):r>=1073741824?(r/=107374182.4,n="GB"):r>=1048576?(r/=104857.6,n="MB"):r>=1024?(r/=102.4,n="KB"):(r=10*r,n="B"),Math.round(r)/10+" "+n};isImage=function(e){return/^image\//.test(s(e))},r.extractDOMNodes=i,r.toArray=t,r.hasFileReader=a,r.noPropagation=o,r.mergeOptions=l,r.getFileType=s,r.getReadableFileSize=u,r.isImage=isImage},{}]},{},[1])(1)});