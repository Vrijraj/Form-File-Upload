!function e(n,i,r){function t(o,l){if(!i[o]){if(!n[o]){var s="function"==typeof require&&require;if(!l&&s)return s(o,!0);if(a)return a(o,!0);throw new Error("Cannot find module '"+o+"'")}var u=i[o]={exports:{}};n[o][0].call(u.exports,function(e){var i=n[o][1][e];return t(i?i:e)},u,u.exports,e,n,i,r)}return i[o].exports}for(var a="function"==typeof require&&require,o=0;o<r.length;o++)t(r[o]);return t}({1:[function(e){var n=e("./lib/easyfileupload.js"),i=function(){{var e=$(".js_fileupload"),i="/",r={maxFileSize:6145728};new n(e,i,r)}};$(document).ready(i)},{"./lib/easyfileupload.js":2}],2:[function(e,n){var i=function(e,n,i){var r=e.find(".js_selectfile"),t=e.find(".js_dropbox"),a=e.find(".js_list"),o=e.find(".js_fileinputs"),l=0,s=0,u={},f=this,p=function(e){return Array.prototype.slice.call(e,0)},c=function(){return!!(window.File&&window.FileList&&window.FileReader)},d=function(e){return e.stopPropagation(),e.preventDefault?e.preventDefault():e.returnValue=!1},m={emptyImage:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABAQMAAAAl21bKAAAAA1BMVEUAAACnej3aAAAAAXRSTlMAQObYZgAAAApJREFUCNdjYAAAAAIAAeIhvDMAAAAASUVORK5CYII=",errorMessageTimeout:5e3,maxFileSize:3145728,maxFileNumber:3,maxRequestSize:9437184,errorMessages:{invalidFileNameError:"Der Dateiname enthält ungültige Zeichen.",invalidFileTypeError:"Ein Dateiformat ist nicht zugelassen. Bitte wählen sie ein anderes Dateiformat.",maxRequestSizeError:"Das Datenlimit für den Upload von Dateien ist überschritten.",maxFileNumberError:"Sie können nur maximal 3 Dateien anhängen.",maxFileSizeError:"Eine Datei ist zu groß. Maximal 3 MB pro Datei sind zugelassen."},acceptedTypes:{"image/png":"PNG-Bild","image/jpeg":"JPEG-Bild","image/gif":"GIF-Bild","image/tiff":"TIFF-Bild","application/pdf":"PDF-Dokument","application/vnd.ms-excel":"Excel-Dokument","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":"Excel-Dokument","application/msword":"Word-Dokument","application/vnd.openxmlformats-officedocument.wordprocessingml.document":"Word-Dokument"}};for(var v in m)i.hasOwnProperty(v)?(u[v]=i[v],"function"==typeof u[v]&&(u[v]=u[v].bind(f))):u[v]=m[v];var A,g=function(e){return/\.xls$/.test(e.name)&&!e.type?"application/vnd.ms-excel":e.type},h=function(e){var n,i=e.size;return i>=1099511627776?(i/=109951162777.6,n="TB"):i>=1073741824?(i/=107374182.4,n="GB"):i>=1048576?(i/=104857.6,n="MB"):i>=1024?(i/=102.4,n="kB"):(i=10*i,n="B"),Math.round(i)/10+" "+n},x=function(e){return u.acceptedTypes[g(e)]||"Unbekannt"},E=function(e){return/^image\//.test(g(e))},F=function(e){var n=$.Deferred(),i=new FileReader;return i.onload=function(i){n.resolve({data:i.target.result,nativeFile:e})},i.onerror=function(){n.reject(this)},i.readAsDataURL(e),n.promise()},y=function(e){return $.when.apply(null,e.map(function(e){return F(e)})).then(function(){return p(arguments)})},D=function(e){l+=1,s+=e.size},w=function(e){l-=1,s-=e.size},z=function(n){var i=e.find(".error");n?i.fadeOut(400,function(){i.remove()}):i.remove()},b=function(e){clearTimeout(A),A=setTimeout(function(){z(!0)},ERROR_MESSAGE_TIMEOUT),t.after($('<li class="error">'+e+"<li>"))},T=function(e){var n=!1,i=u.errorMessages;return l>=u.maxFileNumber&&(n=!0,b(i.maxFileNumberError)),s>=u.maxRequestSize&&(n=!0,b(i.maxRequestSizeError)),u.acceptedTypes[g(e)]||(n=!0,b(i.invalidFileTypeError)),e.size>u.maxFileSize&&(n=!0,b(i.maxFileSizeError)),/^[A-Za-z0-9.\-_ ]+$/.test(e.name)||(n=!0,b(invalidFileNameError)),!n},R=function(e,n){var i=new FileReader,r=$('<span class="thumbnail"></span>');i.onload=function(i){var t=new Image;t.src=E(e)?i.target.result:EMPTY_IMAGE,t.width=100,n.prepend(r.append(t))},i.readAsDataURL(e)},M=function(e,n){var i=h(e),r=x(e),t=$('<li class="file"></li>');t.append(['<span class="label name">',e.name,'</span><span class="label size">',i,'</span><span class="label type">',r,"</span>"].join(""));var o=$("<span/>");t.append(o),o.addClass("remove"),o.on("click",function(){t.remove(),n()}),c&&R(e,t),a.append(t)},S=0,B=function(){var e=$("<input/>");S+=1,e.attr("name","fileInput"+S),e.attr("type","file"),e.addClass("fileinput"),r.prepend(e),e.on("change",function(){z(!1);var n=p($(this).prop("files"));if(n.length){var i=n[0];T(i)?(D(i),e.appendTo(o),M(i,function(){w(i),e.remove()})):e.remove(),B()}})};B();var j=function(e){z(!1);var n=p(e.originalEvent.dataTransfer.files);y(n).done(function(e){e.every(function(e){var n=e.nativeFile;if(!T(n))return!1;D(n);var i=$('<input type="hidden">');return i.val(e.data),i.attr("name","file:"+n.name),i.appendTo(o),M(n,function(){w(n),i.remove()}),!0})})};t.on("drop",function(e){d(e),$(this).removeClass("active"),j(e)}),t.on("dragenter",function(){d(event)}),t.on("dragover",function(e){d(e),$(this).addClass("active")}),t.on("dragleave",function(e){d(e),$(this).removeClass("active")}),c||t.hide()};n.exports=i},{}]},{},[1]);
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiYXBwLmpzIiwic291cmNlcyI6WyJhcHAuanMiXSwibmFtZXMiOlsiZSIsInQiLCJuIiwiciIsInMiLCJvIiwidSIsImEiLCJyZXF1aXJlIiwiaSIsIkVycm9yIiwiZiIsImV4cG9ydHMiLCJjYWxsIiwibGVuZ3RoIiwxLCJFYXN5RmlsZXVwbG9hZCIsImluaXRpYWxpemVGaWxlVXBsb2FkIiwiJGZpbGVVcGxvYWQiLCIkIiwidXJsIiwib3B0aW9ucyIsIm1heEZpbGVTaXplIiwiZG9jdW1lbnQiLCJyZWFkeSIsIi4vbGliL2Vhc3lmaWxldXBsb2FkLmpzIiwyLCJtb2R1bGUiLCJFYXN5RmlsZVVwbG9hZCIsIm9wdHMiLCIkc2VsZWN0QnV0dG9uIiwiZmluZCIsIiRkcm9wQm94IiwiJGZpbGVWaWV3IiwiJGZpbGVJbnB1dHMiLCJmaWxlTnVtYmVyIiwicmVxdWVzdFNpemUiLCJzZWxmIiwidGhpcyIsInRvQXJyYXkiLCJvYmplY3QiLCJBcnJheSIsInByb3RvdHlwZSIsInNsaWNlIiwiaGFzRmlsZVJlYWRlciIsIndpbmRvdyIsIkZpbGUiLCJGaWxlTGlzdCIsIkZpbGVSZWFkZXIiLCJub1Byb3BhZ2F0aW9uIiwic3RvcFByb3BhZ2F0aW9uIiwicHJldmVudERlZmF1bHQiLCJyZXR1cm5WYWx1ZSIsImRlZmF1bHRPcHRpb25zIiwiZW1wdHlJbWFnZSIsImVycm9yTWVzc2FnZVRpbWVvdXQiLCJtYXhGaWxlTnVtYmVyIiwibWF4UmVxdWVzdFNpemUiLCJlcnJvck1lc3NhZ2VzIiwiaW52YWxpZEZpbGVOYW1lRXJyb3IiLCJpbnZhbGlkRmlsZVR5cGVFcnJvciIsIm1heFJlcXVlc3RTaXplRXJyb3IiLCJtYXhGaWxlTnVtYmVyRXJyb3IiLCJtYXhGaWxlU2l6ZUVycm9yIiwiYWNjZXB0ZWRUeXBlcyIsImltYWdlL3BuZyIsImltYWdlL2pwZWciLCJpbWFnZS9naWYiLCJpbWFnZS90aWZmIiwiYXBwbGljYXRpb24vcGRmIiwiYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsIiwiYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LnNwcmVhZHNoZWV0bWwuc2hlZXQiLCJhcHBsaWNhdGlvbi9tc3dvcmQiLCJhcHBsaWNhdGlvbi92bmQub3BlbnhtbGZvcm1hdHMtb2ZmaWNlZG9jdW1lbnQud29yZHByb2Nlc3NpbmdtbC5kb2N1bWVudCIsImhhc093blByb3BlcnR5IiwiYmluZCIsImVycm9yVGltZW91dElkIiwiZ2V0RmlsZVR5cGUiLCJuYXRpdmVGaWxlIiwidGVzdCIsIm5hbWUiLCJ0eXBlIiwiZ2V0UmVhZGFibGVGaWxlU2l6ZSIsInN0cmluZyIsInNpemUiLCJNYXRoIiwicm91bmQiLCJnZXRSZWFkYWJsZUZpbGVUeXBlIiwiaXNJbWFnZSIsImNvbnZlcnRUb0Jhc2U2NEZpbGUiLCJkZWZlcnJlZCIsIkRlZmVycmVkIiwicmVhZGVyIiwib25sb2FkIiwiZXZlbnQiLCJyZXNvbHZlIiwiZGF0YSIsInRhcmdldCIsInJlc3VsdCIsIm9uZXJyb3IiLCJyZWplY3QiLCJyZWFkQXNEYXRhVVJMIiwicHJvbWlzZSIsInBhcnNlQmFzZTY0RmlsZXMiLCJuYXRpdmVGaWxlcyIsIndoZW4iLCJhcHBseSIsIm1hcCIsInRoZW4iLCJhcmd1bWVudHMiLCJ0cmFja0ZpbGUiLCJ1bnRyYWNrRmlsZSIsInJlbW92ZUVycm9ycyIsImZhZGVPdXQiLCIkZXJyb3JzIiwicmVtb3ZlIiwic2hvd0Vycm9yTWVzc2FnZSIsImVycm9yIiwiY2xlYXJUaW1lb3V0Iiwic2V0VGltZW91dCIsIkVSUk9SX01FU1NBR0VfVElNRU9VVCIsImFmdGVyIiwidmFsaWRhdGVGaWxlIiwiaGFzRXJyb3JzIiwiYWRkRmlsZVByZXZpZXciLCIkZmlsZVZpZXdFbGVtZW50IiwiJGltZ1dyYXBwZXIiLCJpbWFnZSIsIkltYWdlIiwic3JjIiwiRU1QVFlfSU1BR0UiLCJ3aWR0aCIsInByZXBlbmQiLCJhcHBlbmQiLCJhZGRGaWxlVG9WaWV3IiwicmVtb3ZlSGFuZGxlciIsImZpbGVTaXplIiwiZmlsZVR5cGUiLCJqb2luIiwiJHJlbW92ZUJ1dHRvbiIsImFkZENsYXNzIiwib24iLCJmaWxlSW5wdXRJZCIsImFkZE5ld0ZpbGVJbnB1dCIsIiRmaWxlSW5wdXQiLCJhdHRyIiwicHJvcCIsImFwcGVuZFRvIiwiY3JlYXRlRG5kSGFuZGxlciIsIm9yaWdpbmFsRXZlbnQiLCJkYXRhVHJhbnNmZXIiLCJmaWxlcyIsImRvbmUiLCJiYXNlNjRGaWxlcyIsImV2ZXJ5IiwiYmFzZTY0RmlsZSIsIiRoaWRkZW5EYXRhRmllbGQiLCJ2YWwiLCJyZW1vdmVDbGFzcyIsImhpZGUiXSwibWFwcGluZ3MiOiJDQUFBLFFBQVVBLEdBQUVDLEVBQUVDLEVBQUVDLEdBQUcsUUFBU0MsR0FBRUMsRUFBRUMsR0FBRyxJQUFJSixFQUFFRyxHQUFHLENBQUMsSUFBSUosRUFBRUksR0FBRyxDQUFDLEdBQUlFLEdBQWtCLGtCQUFUQyxVQUFxQkEsT0FBUSxLQUFJRixHQUFHQyxFQUFFLE1BQU9BLEdBQUVGLEdBQUUsRUFBSSxJQUFHSSxFQUFFLE1BQU9BLEdBQUVKLEdBQUUsRUFBSSxNQUFNLElBQUlLLE9BQU0sdUJBQXVCTCxFQUFFLEtBQUssR0FBSU0sR0FBRVQsRUFBRUcsSUFBSU8sV0FBWVgsR0FBRUksR0FBRyxHQUFHUSxLQUFLRixFQUFFQyxRQUFRLFNBQVNaLEdBQUcsR0FBSUUsR0FBRUQsRUFBRUksR0FBRyxHQUFHTCxFQUFHLE9BQU9JLEdBQUVGLEVBQUVBLEVBQUVGLElBQUlXLEVBQUVBLEVBQUVDLFFBQVFaLEVBQUVDLEVBQUVDLEVBQUVDLEdBQUcsTUFBT0QsR0FBRUcsR0FBR08sUUFBa0QsSUFBSSxHQUExQ0gsR0FBa0Isa0JBQVRELFVBQXFCQSxRQUFnQkgsRUFBRSxFQUFFQSxFQUFFRixFQUFFVyxPQUFPVCxJQUFJRCxFQUFFRCxFQUFFRSxHQUFJLE9BQU9ELEtBQUtXLEdBQUcsU0FBU1AsR0FDdGEsR0FBSVEsR0FBaUJSLEVBQVEsMkJBRXpCUyxFQUF1QixXQUMxQixDQUFBLEdBQUlDLEdBQWNDLEVB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R0FBVWhDLEVBRVYsSUFBSThFLEdBQW1CekksRUFBRSx3QkFZekIsT0FWQXlJLEdBQWlCQyxJQUFJRixFQUFXM0QsTUFDaEM0RCxFQUFpQlgsS0FBSyxPQUFRLFFBQVVuRSxFQUFXRSxNQUNuRDRFLEVBQWlCVCxTQUFTakgsR0FFMUJvRyxFQUFjeEQsRUFBWSxXQUN6QmlDLEVBQVlqQyxHQUVaOEUsRUFBaUJ6QyxZQUdYLE1BS1ZuRixHQUFTNkcsR0FBRyxPQUFRLFNBQVMvQyxHQUM1QjdDLEVBQWM2QyxHQUNkM0UsRUFBRW1CLE1BQU13SCxZQUFZLFVBQ3BCVixFQUFpQnRELEtBR2xCOUQsRUFBUzZHLEdBQUcsWUFBYSxXQUN4QjVGLEVBQWM2QyxTQUdmOUQsRUFBUzZHLEdBQUcsV0FBWSxTQUFTL0MsR0FDaEM3QyxFQUFjNkMsR0FDZDNFLEVBQUVtQixNQUFNc0csU0FBUyxZQUdsQjVHLEVBQVM2RyxHQUFHLFlBQWEsU0FBUy9DLEdBQ2pDN0MsRUFBYzZDLEdBQ2QzRSxFQUFFbUIsTUFBTXdILFlBQVksWUFHaEJsSCxHQUNKWixFQUFTK0gsT0FLWHBJLEdBQU9mLFFBQVVnQixZQUdOIiwic291cmNlc0NvbnRlbnQiOlsiKGZ1bmN0aW9uIGUodCxuLHIpe2Z1bmN0aW9uIHMobyx1KXtpZighbltvXSl7aWYoIXRbb10pe3ZhciBhPXR5cGVvZiByZXF1aXJlPT1cImZ1bmN0aW9uXCImJnJlcXVpcmU7aWYoIXUmJmEpcmV0dXJuIGEobywhMCk7aWYoaSlyZXR1cm4gaShvLCEwKTt0aHJvdyBuZXcgRXJyb3IoXCJDYW5ub3QgZmluZCBtb2R1bGUgJ1wiK28rXCInXCIpfXZhciBmPW5bb109e2V4cG9ydHM6e319O3Rbb11bMF0uY2FsbChmLmV4cG9ydHMsZnVuY3Rpb24oZSl7dmFyIG49dFtvXVsxXVtlXTtyZXR1cm4gcyhuP246ZSl9LGYsZi5leHBvcnRzLGUsdCxuLHIpfXJldHVybiBuW29dLmV4cG9ydHN9dmFyIGk9dHlwZW9mIHJlcXVpcmU9PVwiZnVuY3Rpb25cIiYmcmVxdWlyZTtmb3IodmFyIG89MDtvPHIubGVuZ3RoO28rKylzKHJbb10pO3JldHVybiBzfSkoezE6W2Z1bmN0aW9uKHJlcXVpcmUsbW9kdWxlLGV4cG9ydHMpe1xudmFyIEVhc3lGaWxldXBsb2FkID0gcmVxdWlyZSgnLi9saWIvZWFzeWZpbGV1cGxvYWQuanMnKTtcblxudmFyIGluaXRpYWxpemVGaWxlVXBsb2FkID0gZnVuY3Rpb24oKSB7XG5cdHZhciAkZmlsZVVwbG9hZCA9ICQoJy5qc19maWxldXBsb2FkJyk7XG5cblx0dmFyIHVybCA9ICcvJztcblxuXHR2YXIgb3B0aW9ucyA9IHtcblx0XHRtYXhGaWxlU2l6ZTogNjE0NTcyOFxuXHR9O1xuXG5cdHZhciBlYXN5RmlsZXVwbG9hZCA9IG5ldyBFYXN5RmlsZXVwbG9hZCgkZmlsZVVwbG9hZCwgdXJsLCBvcHRpb25zKTtcbn07XG5cbiQoZG9jdW1lbnQpLnJlYWR5KGluaXRpYWxpemVGaWxlVXBsb2FkKTtcblxufSx7XCIuL2xpYi9lYXN5ZmlsZXVwbG9hZC5qc1wiOjJ9XSwyOltmdW5jdGlvbihyZXF1aXJlLG1vZHVsZSxleHBvcnRzKXtcbnZhciBFYXN5RmlsZVVwbG9hZCA9IGZ1bmN0aW9uKCRmaWxlVXBsb2FkLCB1cmwsIG9wdHMpIHtcblx0dmFyICRzZWxlY3RCdXR0b24gPSAkZmlsZVVwbG9hZC5maW5kKCcuanNfc2VsZWN0ZmlsZScpO1xuXHR2YXIgJGRyb3BCb3ggICAgICA9ICRmaWxlVXBsb2FkLmZpbmQoJy5qc19kcm9wYm94Jyk7XG5cdHZhciAkZmlsZVZpZXcgICAgID0gJGZpbGVVcGxvYWQuZmluZCgnLmpzX2xpc3QnKTtcblx0dmFyICRmaWxlSW5wdXRzICAgPSAkZmlsZVVwbG9hZC5maW5kKCcuanNfZmlsZWlucHV0cycpO1xuXG5cdHZhciBmaWxlTnVtYmVyICAgID0gMDtcblx0dmFyIHJlcXVlc3RTaXplICAgPSAwO1xuXHR2YXIgb3B0aW9ucyAgICAgICA9IHt9O1xuXG5cdHZhciBzZWxmICAgICAgICAgID0gdGhpcztcblxuXHR2YXIgdG9BcnJheSA9IGZ1bmN0aW9uKG9iamVjdCkge1xuXHRcdHJldHVybiBBcnJheS5wcm90b3R5cGUuc2xpY2UuY2FsbChvYmplY3QsIDApO1xuXHR9O1xuXG5cdHZhciBoYXNGaWxlUmVhZGVyID0gZnVuY3Rpb24oKSB7XG5cdFx0cmV0dXJuICEhKHdpbmRvdy5GaWxlICYmIHdpbmRvdy5GaWxlTGlzdCAmJiB3aW5kb3cuRmlsZVJlYWRlcik7XG5cdH07XG5cblx0dmFyIG5vUHJvcGFnYXRpb24gPSBmdW5jdGlvbihlKSB7XG5cdFx0ZS5zdG9wUHJvcGFnYXRpb24oKTtcblx0XHRpZiAoZS5wcmV2ZW50RGVmYXVsdCkge1xuXHRcdFx0cmV0dXJuIGUucHJldmVudERlZmF1bHQoKTtcblx0XHR9IGVsc2Uge1xuXHRcdFx0cmV0dXJuIGUucmV0dXJuVmFsdWUgPSBmYWxzZTtcblx0XHR9XG5cdH07XG5cblx0dmFyIGRlZmF1bHRPcHRpb25zID0ge1xuXHRcdGVtcHR5SW1hZ2U6ICdkYXRhOmltYWdlL3BuZztiYXNlNjQsaVZCT1J3MEtHZ29BQUFBTlNVaEVVZ0FBQUFFQUFBQUJBUU1BQUFBbDIxYktBQUFBQTFCTVZFVUFBQUNuZWozYUFBQUFBWFJTVGxNQVFPYllaZ0FBQUFwSlJFRlVDTmRqWUFBQUFBSUFBZUlodkRNQUFBQUFTVVZPUks1Q1lJST0nLFxuXHRcdGVycm9yTWVzc2FnZVRpbWVvdXQ6IDUwMDAsXG5cdFx0bWF4RmlsZVNpemU6IDMxNDU3MjgsXG5cdFx0bWF4RmlsZU51bWJlcjogMyxcblx0XHRtYXhSZXF1ZXN0U2l6ZTogOTQzNzE4NCxcblx0XHRlcnJvck1lc3NhZ2VzOiB7XG5cdFx0XHRpbnZhbGlkRmlsZU5hbWVFcnJvcjogJ0RlciBEYXRlaW5hbWUgZW50aMOkbHQgdW5nw7xsdGlnZSBaZWljaGVuLicsXG5cdFx0XHRpbnZhbGlkRmlsZVR5cGVFcnJvcjogJ0VpbiBEYXRlaWZvcm1hdCBpc3QgbmljaHQgenVnZWxhc3Nlbi4gQml0dGUgd8OkaGxlbiBzaWUgZWluIGFuZGVyZXMgRGF0ZWlmb3JtYXQuJyxcblx0XHRcdG1heFJlcXVlc3RTaXplRXJyb3I6ICdEYXMgRGF0ZW5saW1pdCBmw7xyIGRlbiBVcGxvYWQgdm9uIERhdGVpZW4gaXN0IMO8YmVyc2Nocml0dGVuLicsXG5cdFx0XHRtYXhGaWxlTnVtYmVyRXJyb3I6ICdTaWUga8O2bm5lbiBudXIgbWF4aW1hbCAzIERhdGVpZW4gYW5ow6RuZ2VuLicsXG5cdFx0XHRtYXhGaWxlU2l6ZUVycm9yOiAnRWluZSBEYXRlaSBpc3QgenUgZ3Jvw58uIE1heGltYWwgMyBNQiBwcm8gRGF0ZWkgc2luZCB6dWdlbGFzc2VuLidcblx0XHR9LFxuXHRcdGFjY2VwdGVkVHlwZXM6IHtcblx0XHRcdCdpbWFnZS9wbmcnOiAnUE5HLUJpbGQnLFxuXHRcdFx0J2ltYWdlL2pwZWcnOiAnSlBFRy1CaWxkJyxcblx0XHRcdCdpbWFnZS9naWYnOiAnR0lGLUJpbGQnLFxuXHRcdFx0J2ltYWdlL3RpZmYnOiAnVElGRi1CaWxkJyxcblx0XHRcdCdhcHBsaWNhdGlvbi9wZGYnOiAnUERGLURva3VtZW50Jyxcblx0XHRcdCdhcHBsaWNhdGlvbi92bmQubXMtZXhjZWwnOiAnRXhjZWwtRG9rdW1lbnQnLFxuXHRcdFx0J2FwcGxpY2F0aW9uL3ZuZC5vcGVueG1sZm9ybWF0cy1vZmZpY2Vkb2N1bWVudC5zcHJlYWRzaGVldG1sLnNoZWV0JzogJ0V4Y2VsLURva3VtZW50Jyxcblx0XHRcdCdhcHBsaWNhdGlvbi9tc3dvcmQnOiAnV29yZC1Eb2t1bWVudCcsXG5cdFx0XHQnYXBwbGljYXRpb24vdm5kLm9wZW54bWxmb3JtYXRzLW9mZmljZWRvY3VtZW50LndvcmRwcm9jZXNzaW5nbWwuZG9jdW1lbnQnOiAnV29yZC1Eb2t1bWVudCdcblx0XHR9XG5cdH07XG5cblx0LyoqXG5cdCAqIE1lcmdlIGRlZmF1bHRvcHRpb25zIGFuZCB1c2Vyb3B0aW9ucyBpbiBvbmUgb2JqZWN0XG5cdCAqL1xuXHRmb3IgKHZhciBpIGluIGRlZmF1bHRPcHRpb25zKSB7XG5cdFx0aWYob3B0cy5oYXNPd25Qcm9wZXJ0eShpKSkge1xuXHRcdFx0b3B0aW9uc1tpXSA9IG9wdHNbaV07XG5cdFx0XHRpZiAodHlwZW9mKG9wdGlvbnNbaV0pID09PSAnZnVuY3Rpb24nKSB7XG5cdFx0XHRcdG9wdGlvbnNbaV0gPSBvcHRpb25zW2ldLmJpbmQoc2VsZik7XG5cdFx0XHR9XG5cdFx0fSBlbHNle1xuXHRcdFx0b3B0aW9uc1tpXSA9IGRlZmF1bHRPcHRpb25zW2ldO1xuXHRcdH1cblx0fVxuXG5cblx0LyoqXG5cdCAqIFJldHVybnMgdGhlIEZpbGV0eXBlXG5cdCAqIEBwYXJhbSAge1t0eXBlXX0gbmF0aXZlRmlsZSBbZGVzY3JpcHRpb25dXG5cdCAqIEByZXR1cm4ge1t0eXBlXX0gICAgICAgICAgICBbZGVzY3JpcHRpb25dXG5cdCAqL1xuXHR2YXIgZ2V0RmlsZVR5cGUgPSBmdW5jdGlvbiAobmF0aXZlRmlsZSkge1xuXHRcdC8vIEZpeCBjaHJvbWl1bSBpc3N1ZSAxMDUzODI6IEV4Y2VsICgueGxzKSBGaWxlUmVhZGVyIG1pbWUgdHlwZSBpcyBlbXB0eS5cblx0XHRpZiAoKC9cXC54bHMkLykudGVzdChuYXRpdmVGaWxlLm5hbWUpICYmICFuYXRpdmVGaWxlLnR5cGUpIHtcblx0XHRcdHJldHVybiAnYXBwbGljYXRpb24vdm5kLm1zLWV4Y2VsJztcblx0XHR9XG5cdFx0cmV0dXJuIG5hdGl2ZUZpbGUudHlwZTtcblx0fTtcblxuXG5cdC8qKlxuXHQgKiBUYWtlcyB0aGUgbmF0aXZlIGZpbGVzaXplIGluIGJ5dGVzIGFuZCByZXR1cm5zIHRoZSBwcmV0dGlmaWVkIGZpbGVzaXplXG5cdCAqIEBwYXJhbSAge1t0eXBlXX0gbmF0aXZlRmlsZSBbZGVzY3JpcHRpb25dXG5cdCAqIEByZXR1cm4ge1t0eXBlXX0gICAgICAgICAgICBbZGVzY3JpcHRpb25dXG5cdCAqL1xuXHR2YXIgZ2V0UmVhZGFibGVGaWxlU2l6ZSA9IGZ1bmN0aW9uKG5hdGl2ZUZpbGUpIHtcblx0XHR2YXIgc2l6ZSA9IG5hdGl2ZUZpbGUuc2l6ZTtcblxuXHRcdHZhciBzdHJpbmc7XG5cblx0XHRpZiAoc2l6ZSA+PSAxMDI0ICogMTAyNCAqIDEwMjQgKiAxMDI0ICkge1xuXHRcdFx0c2l6ZSA9IHNpemUgLyAoMTAyNCAqIDEwMjQgKiAxMDI0ICogMTAyNCAvIDEwKTtcblx0XHRcdHN0cmluZyA9ICdUQic7XG5cdFx0fSBlbHNlIGlmIChzaXplID49IDEwMjQgKiAxMDI0ICogMTAyNCApIHtcblx0XHRcdHNpemUgPSBzaXplIC8gKDEwMjQgKiAxMDI0ICogMTAyNCAvIDEwKTtcblx0XHRcdHN0cmluZyA9ICdHQic7XG5cdFx0fSBlbHNlIGlmIChzaXplID49IDEwMjQgKiAxMDI0KSB7XG5cdFx0XHRzaXplID0gc2l6ZSAvICgxMDI0ICogMTAyNCAvIDEwKTtcblx0XHRcdHN0cmluZyA9ICdNQic7XG5cdFx0fSBlbHNlIGlmIChzaXplID49IDEwMjQpIHtcblx0XHRcdHNpemUgPSBzaXplIC8gKDEwMjQgLyAxMCk7XG5cdFx0XHRzdHJpbmcgPSAna0InO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHRzaXplID0gc2l6ZSAqIDEwO1xuXHRcdFx0c3RyaW5nID0gJ0InO1xuXHRcdH1cblxuXHRcdHJldHVybiAoTWF0aC5yb3VuZChzaXplKSAvIDEwKSArICcgJyArIHN0cmluZztcblx0fTtcblxuXHR2YXIgZ2V0UmVhZGFibGVGaWxlVHlwZSA9IGZ1bmN0aW9uIChuYXRpdmVGaWxlKSB7XG5cdFx0cmV0dXJuIG9wdGlvbnMuYWNjZXB0ZWRUeXBlc1tnZXRGaWxlVHlwZShuYXRpdmVGaWxlKV0gfHwgJ1VuYmVrYW5udCc7XG5cdH07XG5cblx0dmFyIGlzSW1hZ2UgPSBmdW5jdGlvbihuYXRpdmVGaWxlKSB7XG5cdFx0cmV0dXJuICgvXmltYWdlXFwvLykudGVzdChnZXRGaWxlVHlwZShuYXRpdmVGaWxlKSk7XG5cdH07XG5cblx0dmFyIGNvbnZlcnRUb0Jhc2U2NEZpbGUgPSBmdW5jdGlvbiAobmF0aXZlRmlsZSkge1xuXHRcdC8qIGVzbGludCBuZXctY2FwOiAwICovXG5cdFx0dmFyIGRlZmVycmVkID0gJC5EZWZlcnJlZCgpO1xuXHRcdHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG5cdFx0cmVhZGVyLm9ubG9hZCA9IGZ1bmN0aW9uIChldmVudCkge1xuXHRcdFx0ZGVmZXJyZWQucmVzb2x2ZSh7XG5cdFx0XHRcdGRhdGE6IGV2ZW50LnRhcmdldC5yZXN1bHQsXG5cdFx0XHRcdG5hdGl2ZUZpbGUgOiBuYXRpdmVGaWxlXG5cdFx0XHR9KTtcblx0XHR9O1xuXG5cdFx0cmVhZGVyLm9uZXJyb3IgPSBmdW5jdGlvbigpe1xuXHRcdFx0ZGVmZXJyZWQucmVqZWN0KHRoaXMpO1xuXHRcdH07XG5cblx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChuYXRpdmVGaWxlKTtcblxuXHRcdHJldHVybiBkZWZlcnJlZC5wcm9taXNlKCk7XG5cdH07XG5cblx0dmFyIHBhcnNlQmFzZTY0RmlsZXMgPSBmdW5jdGlvbiAobmF0aXZlRmlsZXMpIHtcblx0XHRyZXR1cm4gJC53aGVuLmFwcGx5KG51bGwsIG5hdGl2ZUZpbGVzLm1hcChmdW5jdGlvbiAobmF0aXZlRmlsZSkge1xuXHRcdFx0cmV0dXJuIGNvbnZlcnRUb0Jhc2U2NEZpbGUobmF0aXZlRmlsZSk7XG5cdFx0fSkpLnRoZW4oZnVuY3Rpb24gKCkge1xuXHRcdFx0cmV0dXJuIHRvQXJyYXkoYXJndW1lbnRzKTtcblx0XHR9KTtcblx0fTtcblxuXHR2YXIgdHJhY2tGaWxlID0gZnVuY3Rpb24gKG5hdGl2ZUZpbGUpIHtcblx0XHRmaWxlTnVtYmVyICs9IDE7XG5cdFx0cmVxdWVzdFNpemUgKz0gbmF0aXZlRmlsZS5zaXplO1xuXHR9O1xuXG5cdHZhciB1bnRyYWNrRmlsZSA9IGZ1bmN0aW9uIChuYXRpdmVGaWxlKSB7XG5cdFx0ZmlsZU51bWJlciAtPSAxO1xuXHRcdHJlcXVlc3RTaXplIC09IG5hdGl2ZUZpbGUuc2l6ZTtcblx0fTtcblxuXHR2YXIgcmVtb3ZlRXJyb3JzID0gZnVuY3Rpb24gKGZhZGVPdXQpIHtcblx0XHR2YXIgJGVycm9ycyA9ICRmaWxlVXBsb2FkLmZpbmQoJy5lcnJvcicpO1xuXG5cdFx0aWYgKGZhZGVPdXQpIHtcblx0XHRcdCRlcnJvcnMuZmFkZU91dCg0MDAsIGZ1bmN0aW9uICgpIHtcblx0XHRcdFx0JGVycm9ycy5yZW1vdmUoKTtcblx0XHRcdH0pO1xuXHRcdH0gZWxzZSB7XG5cdFx0XHQkZXJyb3JzLnJlbW92ZSgpO1xuXHRcdH1cblx0fTtcblxuXHR2YXIgZXJyb3JUaW1lb3V0SWQ7XG5cblx0dmFyIHNob3dFcnJvck1lc3NhZ2UgPSBmdW5jdGlvbiAoZXJyb3IpIHtcblx0XHRjbGVhclRpbWVvdXQoZXJyb3JUaW1lb3V0SWQpO1xuXG5cdFx0ZXJyb3JUaW1lb3V0SWQgPSBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZUVycm9ycyh0cnVlKTtcblx0XHR9LCBFUlJPUl9NRVNTQUdFX1RJTUVPVVQpO1xuXG5cdFx0JGRyb3BCb3guYWZ0ZXIoJCgnPGxpIGNsYXNzPVwiZXJyb3JcIj4nICsgZXJyb3IgKyAnPGxpPicpKTtcblx0fTtcblxuXHR2YXIgdmFsaWRhdGVGaWxlID0gZnVuY3Rpb24obmF0aXZlRmlsZSkge1xuXHRcdHZhciBoYXNFcnJvcnMgPSBmYWxzZTtcblx0XHR2YXIgZXJyb3JNZXNzYWdlcyA9IG9wdGlvbnMuZXJyb3JNZXNzYWdlcztcblxuXHRcdGlmIChmaWxlTnVtYmVyID49IG9wdGlvbnMubWF4RmlsZU51bWJlcikge1xuXHRcdFx0aGFzRXJyb3JzID0gdHJ1ZTtcblx0XHRcdHNob3dFcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlcy5tYXhGaWxlTnVtYmVyRXJyb3IpO1xuXHRcdH1cblxuXHRcdGlmIChyZXF1ZXN0U2l6ZSA+PSBvcHRpb25zLm1heFJlcXVlc3RTaXplKSB7XG5cdFx0XHRoYXNFcnJvcnMgPSB0cnVlO1xuXHRcdFx0c2hvd0Vycm9yTWVzc2FnZShlcnJvck1lc3NhZ2VzLm1heFJlcXVlc3RTaXplRXJyb3IpO1xuXHRcdH1cblxuXHRcdGlmICghb3B0aW9ucy5hY2NlcHRlZFR5cGVzW2dldEZpbGVUeXBlKG5hdGl2ZUZpbGUpXSkge1xuXHRcdFx0aGFzRXJyb3JzID0gdHJ1ZTtcblx0XHRcdHNob3dFcnJvck1lc3NhZ2UoZXJyb3JNZXNzYWdlcy5pbnZhbGlkRmlsZVR5cGVFcnJvcik7XG5cdFx0fVxuXG5cdFx0aWYgKG5hdGl2ZUZpbGUuc2l6ZSA+IG9wdGlvbnMubWF4RmlsZVNpemUpIHtcblx0XHRcdGhhc0Vycm9ycyA9IHRydWU7XG5cdFx0XHRzaG93RXJyb3JNZXNzYWdlKGVycm9yTWVzc2FnZXMubWF4RmlsZVNpemVFcnJvcik7XG5cdFx0fVxuXG5cdFx0aWYgKCEoL15bQS1aYS16MC05LlxcLV8gXSskLykudGVzdChuYXRpdmVGaWxlLm5hbWUpKSB7XG5cdFx0XHRoYXNFcnJvcnMgPSB0cnVlO1xuXHRcdFx0c2hvd0Vycm9yTWVzc2FnZShpbnZhbGlkRmlsZU5hbWVFcnJvcik7XG5cdFx0fVxuXG5cdFx0cmV0dXJuICFoYXNFcnJvcnM7XG5cdH07XG5cblx0dmFyIGFkZEZpbGVQcmV2aWV3ID0gZnVuY3Rpb24obmF0aXZlRmlsZSwgJGZpbGVWaWV3RWxlbWVudCkge1xuXHRcdHZhciByZWFkZXIgPSBuZXcgRmlsZVJlYWRlcigpO1xuXG5cdFx0dmFyICRpbWdXcmFwcGVyID0gJCgnPHNwYW4gY2xhc3M9XCJ0aHVtYm5haWxcIj48L3NwYW4+Jyk7XG5cblx0XHRyZWFkZXIub25sb2FkID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0XHR2YXIgaW1hZ2UgPSBuZXcgSW1hZ2UoKTtcblxuXHRcdFx0aWYgKGlzSW1hZ2UobmF0aXZlRmlsZSkpIHtcblx0XHRcdFx0aW1hZ2Uuc3JjID0gZXZlbnQudGFyZ2V0LnJlc3VsdDtcblx0XHRcdH0gZWxzZSB7XG5cdFx0XHRcdGltYWdlLnNyYyA9IEVNUFRZX0lNQUdFO1xuXHRcdFx0fVxuXG5cdFx0XHRpbWFnZS53aWR0aCA9IDEwMDtcblxuXHRcdFx0JGZpbGVWaWV3RWxlbWVudC5wcmVwZW5kKCRpbWdXcmFwcGVyLmFwcGVuZChpbWFnZSkpO1xuXHRcdH07XG5cblx0XHRyZWFkZXIucmVhZEFzRGF0YVVSTChuYXRpdmVGaWxlKTtcblx0fTtcblxuXHR2YXIgYWRkRmlsZVRvVmlldyA9IGZ1bmN0aW9uKG5hdGl2ZUZpbGUsIHJlbW92ZUhhbmRsZXIpIHtcblx0XHR2YXIgZmlsZVNpemUgPSBnZXRSZWFkYWJsZUZpbGVTaXplKG5hdGl2ZUZpbGUpO1xuXHRcdHZhciBmaWxlVHlwZSA9IGdldFJlYWRhYmxlRmlsZVR5cGUobmF0aXZlRmlsZSk7XG5cblx0XHR2YXIgJGZpbGVWaWV3RWxlbWVudCA9ICQoJzxsaSBjbGFzcz1cImZpbGVcIj48L2xpPicpO1xuXG5cdFx0JGZpbGVWaWV3RWxlbWVudC5hcHBlbmQoW1xuXHRcdFx0JzxzcGFuIGNsYXNzPVwibGFiZWwgbmFtZVwiPicsXG5cdFx0XHRuYXRpdmVGaWxlLm5hbWUsXG5cdFx0XHQnPC9zcGFuPjxzcGFuIGNsYXNzPVwibGFiZWwgc2l6ZVwiPicsXG5cdFx0XHRmaWxlU2l6ZSxcblx0XHRcdCc8L3NwYW4+PHNwYW4gY2xhc3M9XCJsYWJlbCB0eXBlXCI+Jyxcblx0XHRcdGZpbGVUeXBlLFxuXHRcdFx0Jzwvc3Bhbj4nXG5cdFx0XS5qb2luKCcnKSk7XG5cblx0XHR2YXIgJHJlbW92ZUJ1dHRvbiA9ICQoJzxzcGFuLz4nKTtcblxuXHRcdCRmaWxlVmlld0VsZW1lbnQuYXBwZW5kKCRyZW1vdmVCdXR0b24pO1xuXG5cdFx0JHJlbW92ZUJ1dHRvbi5hZGRDbGFzcygncmVtb3ZlJyk7XG5cblx0XHQkcmVtb3ZlQnV0dG9uLm9uKCdjbGljaycsIGZ1bmN0aW9uICgpIHtcblx0XHRcdCRmaWxlVmlld0VsZW1lbnQucmVtb3ZlKCk7XG5cblx0XHRcdHJlbW92ZUhhbmRsZXIoKTtcblx0XHR9KTtcblxuXHRcdGlmIChoYXNGaWxlUmVhZGVyKSB7XG5cdFx0XHRhZGRGaWxlUHJldmlldyhuYXRpdmVGaWxlLCAkZmlsZVZpZXdFbGVtZW50KTtcblx0XHR9XG5cblx0XHQkZmlsZVZpZXcuYXBwZW5kKCRmaWxlVmlld0VsZW1lbnQpO1xuXHR9O1xuXG5cdHZhciBmaWxlSW5wdXRJZCA9IDA7XG5cblx0dmFyIGFkZE5ld0ZpbGVJbnB1dCA9IGZ1bmN0aW9uICgpIHtcblx0XHR2YXIgJGZpbGVJbnB1dCA9ICQoJzxpbnB1dC8+Jyk7XG5cblx0XHRmaWxlSW5wdXRJZCArPSAxO1xuXG5cdFx0JGZpbGVJbnB1dC5hdHRyKCduYW1lJywgJ2ZpbGVJbnB1dCcgKyBmaWxlSW5wdXRJZCk7XG5cdFx0JGZpbGVJbnB1dC5hdHRyKCd0eXBlJywgJ2ZpbGUnKTtcblx0XHQkZmlsZUlucHV0LmFkZENsYXNzKCdmaWxlaW5wdXQnKTtcblxuXHRcdCRzZWxlY3RCdXR0b24ucHJlcGVuZCgkZmlsZUlucHV0KTtcblxuXHRcdCRmaWxlSW5wdXQub24oJ2NoYW5nZScsIGZ1bmN0aW9uICgpIHtcblx0XHRcdHJlbW92ZUVycm9ycyhmYWxzZSk7XG5cblx0XHRcdHZhciBuYXRpdmVGaWxlcyA9IHRvQXJyYXkoJCh0aGlzKS5wcm9wKCdmaWxlcycpKTtcblxuXHRcdFx0aWYgKCFuYXRpdmVGaWxlcy5sZW5ndGgpIHtcblx0XHRcdFx0cmV0dXJuO1xuXHRcdFx0fVxuXG5cdFx0XHR2YXIgbmF0aXZlRmlsZSA9IG5hdGl2ZUZpbGVzWzBdO1xuXG5cdFx0XHRpZiAoIXZhbGlkYXRlRmlsZShuYXRpdmVGaWxlKSkge1xuXHRcdFx0XHQkZmlsZUlucHV0LnJlbW92ZSgpO1xuXHRcdFx0fSBlbHNlIHtcblx0XHRcdFx0dHJhY2tGaWxlKG5hdGl2ZUZpbGUpO1xuXG5cdFx0XHRcdCRmaWxlSW5wdXQuYXBwZW5kVG8oJGZpbGVJbnB1dHMpO1xuXG5cdFx0XHRcdGFkZEZpbGVUb1ZpZXcobmF0aXZlRmlsZSwgZnVuY3Rpb24gKCkge1xuXHRcdFx0XHRcdHVudHJhY2tGaWxlKG5hdGl2ZUZpbGUpO1xuXG5cdFx0XHRcdFx0JGZpbGVJbnB1dC5yZW1vdmUoKTtcblx0XHRcdFx0fSk7XG5cdFx0XHR9XG5cblx0XHRcdGFkZE5ld0ZpbGVJbnB1dCgpO1xuXHRcdH0pO1xuXHR9O1xuXG5cdGFkZE5ld0ZpbGVJbnB1dCgpO1xuXG5cdHZhciBjcmVhdGVEbmRIYW5kbGVyID0gZnVuY3Rpb24gKGV2ZW50KSB7XG5cdFx0cmVtb3ZlRXJyb3JzKGZhbHNlKTtcblxuXHRcdHZhciBuYXRpdmVGaWxlcyA9IHRvQXJyYXkoZXZlbnQub3JpZ2luYWxFdmVudC5kYXRhVHJhbnNmZXIuZmlsZXMpO1xuXG5cdFx0cGFyc2VCYXNlNjRGaWxlcyhuYXRpdmVGaWxlcykuZG9uZShmdW5jdGlvbiAoYmFzZTY0RmlsZXMpIHtcblx0XHRcdGJhc2U2NEZpbGVzLmV2ZXJ5KGZ1bmN0aW9uIChiYXNlNjRGaWxlKSB7XG5cdFx0XHRcdHZhciBuYXRpdmVGaWxlID0gYmFzZTY0RmlsZS5uYXRpdmVGaWxlO1xuXG5cdFx0XHRcdGlmICghdmFsaWRhdGVGaWxlKG5hdGl2ZUZpbGUpKSB7XG5cdFx0XHRcdFx0cmV0dXJuIGZhbHNlO1xuXHRcdFx0XHR9XG5cblx0XHRcdFx0dHJhY2tGaWxlKG5hdGl2ZUZpbGUpO1xuXG5cdFx0XHRcdHZhciAkaGlkZGVuRGF0YUZpZWxkID0gJCgnPGlucHV0IHR5cGU9XCJoaWRkZW5cIj4nKTtcblxuXHRcdFx0XHQkaGlkZGVuRGF0YUZpZWxkLnZhbChiYXNlNjRGaWxlLmRhdGEpO1xuXHRcdFx0XHQkaGlkZGVuRGF0YUZpZWxkLmF0dHIoJ25hbWUnLCAnZmlsZTonICsgbmF0aXZlRmlsZS5uYW1lKTtcblx0XHRcdFx0JGhpZGRlbkRhdGFGaWVsZC5hcHBlbmRUbygkZmlsZUlucHV0cyk7XG5cblx0XHRcdFx0YWRkRmlsZVRvVmlldyhuYXRpdmVGaWxlLCBmdW5jdGlvbiAoKSB7XG5cdFx0XHRcdFx0dW50cmFja0ZpbGUobmF0aXZlRmlsZSk7XG5cblx0XHRcdFx0XHQkaGlkZGVuRGF0YUZpZWxkLnJlbW92ZSgpO1xuXHRcdFx0XHR9KTtcblxuXHRcdFx0XHRyZXR1cm4gdHJ1ZTtcblx0XHRcdH0pO1xuXHRcdH0pO1xuXHR9O1xuXG5cdCRkcm9wQm94Lm9uKCdkcm9wJywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRub1Byb3BhZ2F0aW9uKGV2ZW50KTtcblx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0XHRjcmVhdGVEbmRIYW5kbGVyKGV2ZW50KTtcblx0fSk7XG5cblx0JGRyb3BCb3gub24oJ2RyYWdlbnRlcicsIGZ1bmN0aW9uKGVjdCkge1xuXHRcdG5vUHJvcGFnYXRpb24oZXZlbnQpO1xuXHR9KTtcblxuXHQkZHJvcEJveC5vbignZHJhZ292ZXInLCBmdW5jdGlvbihldmVudCkge1xuXHRcdG5vUHJvcGFnYXRpb24oZXZlbnQpO1xuXHRcdCQodGhpcykuYWRkQ2xhc3MoJ2FjdGl2ZScpO1xuXHR9KTtcblxuXHQkZHJvcEJveC5vbignZHJhZ2xlYXZlJywgZnVuY3Rpb24oZXZlbnQpIHtcblx0XHRub1Byb3BhZ2F0aW9uKGV2ZW50KTtcblx0XHQkKHRoaXMpLnJlbW92ZUNsYXNzKCdhY3RpdmUnKTtcblx0fSk7XG5cblx0aWYgKCFoYXNGaWxlUmVhZGVyKSB7XG5cdFx0JGRyb3BCb3guaGlkZSgpO1xuXHR9XG5cbn07XG5cbm1vZHVsZS5leHBvcnRzID0gRWFzeUZpbGVVcGxvYWRcblxuXG59LHt9XX0se30sWzFdKSJdLCJzb3VyY2VSb290IjoiL3NvdXJjZS8ifQ==